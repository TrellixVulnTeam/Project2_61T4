{% extends "basetemplate.html" %}
{% load bootstrap3 %}
{% bootstrap_css %}
{% bootstrap_javascript %}
{% load staticfiles %}

{% block style %}
<style>
thead > tr {
  color: #cc8800;
  font-size: 13px;
  font-family: Cambria;
  background-color: #333333;
}
</style>

{% endblock %}

{% block navblockleft %}
<h4 class="fontstyle1"><span class ="glyphicon glyphicon-user"></span> {{username}} </h4>
{% endblock %}

{% block navblockright %}
{% include "userprofiletest1.html" %}
{% endblock %}

{% block navblockfilterform %}
{% endblock %}

{% block content %}
<div class="col-auto col-sm-12 col-md-12 col-lg-12">
   <div class="col-auto col-sm-12 col-md-12 col-lg-12  ">
   <div class="col-auto col-sm-6 col-md-2 col-lg-2  card_filter">Start Date : {{startdate}}</div>
   <div class="col-auto col-sm-6 col-md-2 col-lg-2  card_filter">End Date : {{enddate}}</div>
   <div class="col-auto col-sm-6 col-md-2 col-lg-2  card_filter">Data Choice : {{reportno}}</div>
   <div class="col-auto col-sm-6 col-md-2 col-lg-2  card_filter">Interval : {{interval}}</div>
   <div class="col-auto col-sm-6 col-md-2 col-lg-2  card_filter">Team : {{team}}</div>
   <div class="col-auto col-sm-6 col-md-2 col-lg-2  card_filter">Member : {{member}}</div>
  </div>
</div>
<div class="col-auto col-sm-12 col-md-12 col-lg-12 ">
</div>

   <div class="col-auto col-sm-12 col-md-12 col-lg-12 ">
     <div class="col-auto col-sm-12 col-md-12 col-lg-12 middle ">
     <div class="col-auto col-sm-6 col-md-6 col-lg-2 box card1_filter">
       <form action="" method="post">
         <span><a href="{% url 'filterdata' %}" class="fontstyle4 ">Filter Form</a></span>
       </form>
     </div>
     <div class="col-auto col-sm-6 col-md-6 col-lg-8">
     <form action="" method="post">
       {% csrf_token %}
       {% for key, values in view_dict.items %}
       <input type="submit" name = "button" value={{values.value}}   {% if values.value == value %} class="box card1_filter" {%else%} class="box card_filter"{% endif %}>
       {% endfor %}
     </form>
     </div>

  <div class="col-auto col-sm-6 col-md-6 col-lg-2  box card1_filter">
    <form action="" method="post">
      <span><a href="{% url 'export_users_csv' %}" class="fontstyle4 ">Export to CSV</a></span>
    </form>
  </div>
  </div>
</div>

<div class="col-auto col-sm-12 col-md-12 col-lg-12 middle">
  ----------------------------------------------------------
</div>
 <div class="col-auto col-sm-12 col-md-12 col-lg-12">
     {% autoescape off %}
     {{ data | safe }}
     {% endautoescape %}
 </div>
</div>
<script>

$("#id_team").change(function () {
    var team_id = $(this).val();  // get the selected country ID from the HTML input
   console.log(team_id)
   $.ajax({
     url: "{% url 'ajax_load_mimember' %}",                    // set the url of the request (= localhost:8000/hr/ajax/load-cities/)
     data: {
       'team_id': team_id     // add the country id to the GET parameters
     },
       success: function (data) {   // `data` is the return of the `load_cities` view function
       $("#id_member").html(data);  // replace the contents of the city input with the data that came from the server
     }
   });
 });

 $("#id_startdate").datepicker({
   dateFormat: 'yy-mm-dd',
    altField: '#thealtdate',
    altFormat: 'yy-mm-dd'});


 $("#id_enddate").datepicker({
   dateFormat: 'yy-mm-dd',
    altField: '#thealtdate',
    altFormat: 'yy-mm-dd'});

     $(document).ready(function() {
         $('.dataframe').DataTable(
         {
           destroy: true,
           fixedHeader: true,
           scrollY: '100vh',
           scrollCollapse: true,
           scrollX: true,
           fixedColumns: true,
           "lengthMenu": [[50, 100, 150, -1], [50, 100, 150, "All"]]

         });
     } );

  </script>
  <link rel="stylesheet" href="{% static 'datatable/dataTables.bootstrap.min.css' %}" rel="stylesheet">
  <script type="text/javascript" src="{% static 'datatable/jquery.dataTables.min.js' %}"></script>
  <script type="text/javascript" src="{% static 'datatable/dataTables.bootstrap.min.js' %}"  charset="UTF-8"></script>


{% endblock %}

{% block javascript %}
{% endblock %}


{% block footer %}
{% include "userprofilefootertest1.html" %}
{% endblock %}
